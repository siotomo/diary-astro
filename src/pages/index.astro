---
import { getCollection } from 'astro:content';
import Base from '../layouts/Base.astro';
import Card from '../components/Card.astro';

const posts = await getCollection('posts');
const sortedPosts = posts.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<Base title="ホーム">
  <h1 class="text-3xl font-bold text-gray-900 mb-8">最新の記事</h1>

  {sortedPosts.length === 0 ? (
    <p class="text-gray-500">まだ記事がありません。</p>
  ) : (
    <div class="space-y-6">
      {sortedPosts.map((post) => (
        <Card
          title={post.data.title}
          date={post.data.date}
          tags={post.data.tags}
          description={post.data.description}
          href={`${import.meta.env.BASE_URL}posts/${post.id}`}
        />
      ))}
    </div>
  )}
</Base>
